<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="description" content="Javascript plugin for creating easily stylable select boxes with accessibility support">
	<title>Selection Box: Vanilla examples</title>
	<link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

	<link rel="stylesheet" href="css/reset.css"/>
	<link rel="stylesheet" href="css/website.css"/>
	<link rel="stylesheet" href="css/main.css"/>
	<link rel="stylesheet" href="css/countries.css"/>
	<link rel="stylesheet" href="css/tranquility.css"/>
	<link rel="stylesheet" href="css/simple.css"/>

	<script src="/lib/jquery.js"></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-debug.js'></script>
	<script src="/js/selection-box.js"></script>

</head>
<body>
<div class='banner' role='banner'>
	<h1><a href='/'>Selection Box</a></h1>
</div>
<div role='main' class='main'>
	<h2>Knockout Example</h2>
	<p>Selection Boxes can be used along with Knockout JS. Conceptually, a Selection Box is a kind of 'view' of the
	underlying html select box. When the latter changes, the former listens for these changes and updates itself
	accordingly. Knockout and other Javascript libraries never have to know anything about Selection Box, only
	interacting with the native html element itself.</p>
	<p>In this example, we create an observableArray which contains the four 'home' nations. In addition, we have
	the observable 'country' which will hold the currently selected value.
<pre>
var vm = {
	countries : ko.observableArray([
		'Scotland', 'England', 'Ireland', 'Wales'
	]),
	country : ko.observable()
};
ko.applyBindings(vm);
</pre>
	<p>Knockout takes this observableArray and uses it to populate this select box. Subsequently, our code will
	take this element and generate a Selection Box component from it.</p>
	<select class='knockout-example-select-element' data-bind="options: countries, value: country" id='tranquility'></select>
	<p>By default, the native element is hidden, but we have configured it to remain visible so that you can gain an
	understanding as to how it works. If you play around with it, you will see that updating one results in the
	other updating also.</p>
	<p>The area below contains an element bound to current selected value. You should see it remaining in sync
	with the generated component</p>
	<div class='example'>
		<h2 data-bind="text: country"></h2>
	</div>
	<h3>Responding to changes in the observableArray</h3>
	<p>When an observableArray is bound to a select drop down, changes to the underlying array propagate
	through into the dropdown. SelectionBoxes support this functionality. When you select a country from the dropdown
	below, the selected country is pushed into the backing array for our component. If you open up SelectionBox dropdown, you will see
	that the new country has been added.</p>
	<select data-bind='value: newCountry'>
		<optgroup label='europe'>
			<option>France</option>
			<option>Germany</option>
			<option>Italy</option>
		</optgroup>
		<optgroup label='africa'>
			<option>Egypt</option>
			<option>Ethiopia</option>
			<option>South Africa</option>
		</optgroup>

		<optgroup label='america'>
			<option>USA</option>
			<option>Argentina</option>
			<option>Brazil</option>
		</optgroup>

	</select>
</div>
<script>
	/*
		Knockout view model is a wrapped array
	*/
	var vm = {
		countries : ko.observableArray([
			'Scotland', 'England', 'Ireland', 'Wales'
		]),
		country : ko.observable(),
		newCountry : ko.observable()
	};

	ko.applyBindings(vm);

	var config = {
		hideFoundation : false  // show original select box
	};

	var selectionBox = new SelectionBox(document.querySelector('#tranquility'), config);

	/* when newCountry observable changes, add the country to the array that backs up our selection box */
	vm.newCountry.subscribe(function (country) {
		vm.countries.push(country);
	});

</script>


</body>
</html>